FROM python:3.11-slim

ENV DEBIAN_FRONTEND=noninteractive
WORKDIR /app

# Minimal system dependencies
RUN apt-get update && apt-get install -y \
    git curl \
    && rm -rf /var/lib/apt/lists/* /var/cache/apt/*

# Copy local MCP source
COPY ifc-bonsai-mcp-main /opt/ifc-bonsai-mcp

# Install MCP package + requirements
COPY requirements.txt ./
RUN pip install --no-cache-dir --upgrade pip setuptools wheel && \
    pip install --no-cache-dir /opt/ifc-bonsai-mcp && \
    pip install --no-cache-dir -r requirements.txt

# Copy app files
COPY main.py mcp_client.py start.sh ./
RUN chmod +x start.sh

EXPOSE 8080
CMD ["./start.sh"]




